<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø§Ù„ØµÙØ­Ø© 1</title>
<style>
  :root {
    --bg: #0f172a;
    --card: #111827;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --accent: #22c55e;
    --accent-2: #3b82f6;
    --btn-bg: #1f2937;
    --btn-hover: #374151;
    --shadow: 0 10px 25px rgba(0,0,0,.35);
    --radius: 18px;
    --danger: #ef4444;
    --danger-hover: #dc2626;
  }
  * { box-sizing: border-box; }
  html, body {
    margin: 0; padding: 0; background: var(--bg); color: var(--text);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Naskh Arabic", Arial, sans-serif;
  }
  .wrap { min-height: 100vh; display: grid; place-items: center; padding: 24px; }
  .card {
    width: min(920px, 96vw); background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
    border: 1px solid rgba(255,255,255,.08);
    border-radius: var(--radius); padding: 28px; box-shadow: var(--shadow);
    backdrop-filter: blur(6px);
  }
  h1 { margin: 0 0 10px; font-size: clamp(26px, 3.5vw, 40px); letter-spacing: .2px; }
  p.lead { margin: 0 0 26px; color: var(--muted); }
  .grid {
    display: grid; gap: 14px;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }
  a.btn, button.btn {
    display: inline-block; text-decoration: none; text-align: center; cursor: pointer;
    background: var(--btn-bg); color: var(--text); padding: 14px 16px;
    border-radius: 14px; border: 1px solid rgba(255,255,255,.08);
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
    box-shadow: 0 6px 14px rgba(0,0,0,.25);
    font-family: inherit; font-size: inherit;
  }
  a.btn:hover, button.btn:hover { background: var(--btn-hover); transform: translateY(-1px); }
  a.btn.primary, button.btn.primary { background: var(--accent-2); border-color: transparent; color: #fff; }
  .btn.success { background: var(--accent); border-color: transparent; color: #fff; }
  .btn.danger { background: var(--danger); border-color: transparent; color: #fff; }
  .btn.danger:hover { background: var(--danger-hover); }
  
  .upload-section {
    margin: 24px 0;
    padding: 24px;
    border: 2px dashed rgba(255,255,255,.1);
    border-radius: var(--radius);
    text-align: center;
    transition: border-color .3s ease, background-color .3s ease;
  }
  .upload-section.dragover {
    border-color: var(--accent-2);
    background: rgba(59, 130, 246, .05);
  }
  
  .config-section {
    margin: 24px 0;
    padding: 20px;
    background: rgba(255,255,255,.02);
    border-radius: var(--radius);
  }
  
  input[type="file"] {
    width: 100%;
    padding: 12px;
    background: var(--btn-bg);
    border: 1px solid rgba(255,255,255,.08);
    border-radius: 10px;
    color: var(--text);
  }
  
  .files-list {
    margin: 24px 0;
  }
  
  .file-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px;
    background: rgba(255,255,255,.02);
    border-radius: 10px;
    margin-bottom: 8px;
  }
  
  .file-info {
    flex: 1;
  }
  
  .file-name {
    font-weight: 500;
    color: var(--text);
  }
  
  .file-size {
    font-size: 12px;
    color: var(--muted);
  }
  
  .file-actions {
    display: flex;
    gap: 8px;
  }
  
  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
  }
  
  .status-message {
    margin: 16px 0;
    padding: 12px;
    border-radius: 10px;
    text-align: center;
  }
  
  .status-success {
    background: rgba(34, 197, 94, .1);
    color: var(--accent);
    border: 1px solid rgba(34, 197, 94, .2);
  }
  
  .status-error {
    background: rgba(239, 68, 68, .1);
    color: var(--danger);
    border: 1px solid rgba(239, 68, 68, .2);
  }
  
  .status-info {
    background: rgba(59, 130, 246, .1);
    color: var(--accent-2);
    border: 1px solid rgba(59, 130, 246, .2);
  }
  
  .hidden {
    display: none;
  }
  
  .progress {
    width: 100%;
    height: 6px;
    background: rgba(255,255,255,.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 8px 0;
  }
  
  .progress-bar {
    height: 100%;
    background: var(--accent-2);
    width: 0%;
    transition: width .3s ease;
  }
  
  .connection-ok {
    background: rgba(34, 197, 94, .1);
    color: var(--accent);
    border: 1px solid rgba(34, 197, 94, .2);
    padding: 16px;
    border-radius: 10px;
    text-align: center;
  }
  
  .file-preview {
    max-width: 60px;
    max-height: 60px;
    border-radius: 6px;
    margin-left: 12px;
  }
  
  .file-item-content {
    display: flex;
    align-items: center;
    flex: 1;
  }
  
  footer { margin-top: 18px; color: var(--muted); font-size: 13px; }
</style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>Ø§Ù„ØµÙØ­Ø© 1</h1>
      <p class="lead">Ù‡Ø°Ù‡ ØµÙØ­Ø© Ø§Ù„ØµÙØ­Ø© 1.</p>
      
      <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© -->
      <div class="config-section">
        <h3>Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠ</h3>
        <div class="connection-ok">
          <strong>âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</strong>
          <br><small>ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¢Ù…Ù† - ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª</small>
        </div>
      </div>
      
      <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±ÙØ¹ -->
      <div class="upload-section" id="upload-area">
        <h3>Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª</h3>
        <p>Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²</p>
        <input type="file" id="file-input" multiple accept="*/*" style="margin: 16px 0;">
        <button class="btn primary" onclick="addFiles()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª</button>
        <div class="progress hidden" id="upload-progress">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
      </div>
      
      <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø§Ù„Ø© -->
      <div id="status-message" class="hidden"></div>
      
      <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª -->
      <div class="files-list">
        <h3>Ù…Ù„ÙØ§ØªÙŠ (<span id="files-count">0</span>)</h3>
        <div style="margin-bottom: 16px;">
          <button class="btn" onclick="refreshFiles()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
          <button class="btn danger" onclick="clearAllFiles()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
          <button class="btn success" onclick="exportFiles()">ğŸ“¦ ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒÙ„</button>
        </div>
        <div id="files-container">
          <!-- Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§ -->
        </div>
      </div>
      
      <a class="btn primary" href="index.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      
      <footer>
        <p>ğŸ’¾ <strong>ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ:</strong> Ù…Ù„ÙØ§ØªÙƒ Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ù…ØªØµÙØ­Ùƒ Ø¨Ø£Ù…Ø§Ù†</p>
      </footer>
    </div>
  </div>

  <script>
    // Ù…Ø®Ø²Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠ
    const DB_NAME = 'FilesStorage';
    const DB_VERSION = 1;
    const STORE_NAME = 'files';
    
    let db;
    
    // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
    function initDB() {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(DB_NAME, DB_VERSION);
        
        request.onerror = () => reject(request.error);
        request.onsuccess = () => {
          db = request.result;
          resolve(db);
        };
        
        request.onupgradeneeded = (event) => {
          db = event.target.result;
          if (!db.objectStoreNames.contains(STORE_NAME)) {
            const store = db.createObjectStore(STORE_NAME, { keyPath: 'id' });
            store.createIndex('name', 'name', { unique: false });
            store.createIndex('uploadTime', 'uploadTime', { unique: false });
          }
        };
      });
    }
    
    // Ø­ÙØ¸ Ù…Ù„Ù ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    function saveFile(fileData) {
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([STORE_NAME], 'readwrite');
        const store = transaction.objectStore(STORE_NAME);
        const request = store.add(fileData);
        
        request.onsuccess = () => resolve(request.result);
        request.onerror = () => reject(request.error);
      });
    }
    
    // Ù‚Ø±Ø§Ø¡Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
    function getAllFiles() {
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([STORE_NAME], 'readonly');
        const store = transaction.objectStore(STORE_NAME);
        const request = store.getAll();
        
        request.onsuccess = () => resolve(request.result);
        request.onerror = () => reject(request.error);
      });
    }
    
    // Ø­Ø°Ù Ù…Ù„Ù
    function deleteFile(id) {
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([STORE_NAME], 'readwrite');
        const store = transaction.objectStore(STORE_NAME);
        const request = store.delete(id);
        
        request.onsuccess = () => resolve();
        request.onerror = () => reject(request.error);
      });
    }
    
    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
    function clearAllFilesFromDB() {
      return new Promise((resolve, reject) => {
        const transaction = db.transaction([STORE_NAME], 'readwrite');
        const store = transaction.objectStore(STORE_NAME);
        const request = store.clear();
        
        request.onsuccess = () => resolve();
        request.onerror = () => reject(request.error);
      });
    }
    
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
    function showMessage(message, type) {
      const statusDiv = document.getElementById('status-message');
      statusDiv.textContent = message;
      statusDiv.className = `status-message status-${type}`;
      statusDiv.classList.remove('hidden');
      
      setTimeout(() => {
        statusDiv.classList.add('hidden');
      }, 4000);
    }
    
    // ØªØ­ÙˆÙŠÙ„ Ù…Ù„Ù Ø¥Ù„Ù‰ Base64
    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª
    async function addFiles() {
      const fileInput = document.getElementById('file-input');
      const files = fileInput.files;
      
      if (files.length === 0) {
        showMessage('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
        return;
      }
      
      const progressDiv = document.getElementById('upload-progress');
      const progressBar = document.getElementById('progress-bar');
      
      progressDiv.classList.remove('hidden');
      showMessage('ğŸ“ Ø¨Ø¯Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù„ÙØ§Øª...', 'info');
      
      let successCount = 0;
      let failCount = 0;
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const progress = ((i + 1) / files.length) * 100;
        progressBar.style.width = progress + '%';
        
        try {
          const base64Data = await fileToBase64(file);
          const fileData = {
            id: Date.now() + '_' + Math.random().toString(36).substr(2, 9),
            name: file.name,
            size: file.size,
            type: file.type,
            data: base64Data,
            uploadTime: new Date().toLocaleString('ar-SA'),
            timestamp: Date.now()
          };
          
          await saveFile(fileData);
          successCount++;
        } catch (error) {
          failCount++;
          console.error(`ÙØ´Ù„ Ø­ÙØ¸ ${file.name}:`, error);
        }
      }
      
      progressDiv.classList.add('hidden');
      progressBar.style.width = '0%';
      
      if (successCount > 0 && failCount === 0) {
        showMessage(`âœ… ØªÙ… Ø­ÙØ¸ ${successCount} Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­`, 'success');
      } else if (successCount > 0 && failCount > 0) {
        showMessage(`âš ï¸ ØªÙ… Ø­ÙØ¸ ${successCount} Ù…Ù„ÙØŒ ÙØ´Ù„ Ø­ÙØ¸ ${failCount} Ù…Ù„Ù`, 'error');
      } else {
        showMessage('âŒ ÙØ´Ù„ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª', 'error');
      }
      
      fileInput.value = '';
      await displayFiles();
    }
    
    // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
    async function displayFiles() {
      try {
        const files = await getAllFiles();
        const container = document.getElementById('files-container');
        const countSpan = document.getElementById('files-count');
        
        countSpan.textContent = files.length;
        
        if (files.length === 0) {
          container.innerHTML = '<p style="color: var(--muted); text-align: center;">ğŸ“‚ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù…Ø­ÙÙˆØ¸Ø©</p>';
          return;
        }
        
        const sortedFiles = files.sort((a, b) => b.timestamp - a.timestamp);
        
        const fileItems = sortedFiles.map(file => {
          const sizeKB = Math.round(file.size / 1024);
          const isImage = file.type.startsWith('image/');
          
          let preview = '';
          if (isImage) {
            preview = `<img src="${file.data}" class="file-preview" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©">`;
          }
          
          return `
            <div class="file-item">
              <div class="file-item-content">
                ${preview}
                <div class="file-info">
                  <div class="file-name">ğŸ“„ ${file.name}</div>
                  <div class="file-size">${sizeKB} KB - ${file.uploadTime}</div>
                </div>
              </div>
              <div class="file-actions">
                <button class="btn btn-small" onclick="downloadFile('${file.id}')">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„</button>
                <button class="btn btn-small" onclick="viewFile('${file.id}')">ğŸ‘ï¸ Ø¹Ø±Ø¶</button>
                <button class="btn danger btn-small" onclick="removeFile('${file.id}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
              </div>
            </div>
          `;
        }).join('');
        
        container.innerHTML = fileItems;
      } catch (error) {
        showMessage('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª', 'error');
        console.error('Error displaying files:', error);
      }
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù
    async function downloadFile(fileId) {
      try {
        const files = await getAllFiles();
        const file = files.find(f => f.id === fileId);
        
        if (!file) {
          showMessage('âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
          return;
        }
        
        const a = document.createElement('a');
        a.href = file.data;
        a.download = file.name;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        showMessage(`â¬‡ï¸ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${file.name}`, 'success');
      } catch (error) {
        showMessage('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù', 'error');
      }
    }
    
    // Ø¹Ø±Ø¶ Ù…Ù„Ù
    async function viewFile(fileId) {
      try {
        const files = await getAllFiles();
        const file = files.find(f => f.id === fileId);
        
        if (!file) {
          showMessage('âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
          return;
        }
        
        const newWindow = window.open();
        if (file.type.startsWith('image/')) {
          newWindow.document.write(`
            <img src="${file.data}" style="max-width: 100%; height: auto;" alt="${file.name}">
            <p style="text-align: center; font-family: Arial;">${file.name}</p>
          `);
        } else if (file.type === 'application/pdf') {
          newWindow.location.href = file.data;
        } else {
          newWindow.location.href = file.data;
        }
      } catch (error) {
        showMessage('âŒ ÙØ´Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù', 'error');
      }
    }
    
    // Ø­Ø°Ù Ù…Ù„Ù
    async function removeFile(fileId) {
      try {
        const files = await getAllFiles();
        const file = files.find(f => f.id === fileId);
        
        if (!file) {
          showMessage('âŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
          return;
        }
        
        if (!confirm(`ğŸ—‘ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù ${file.name}ØŸ`)) {
          return;
        }
        
        await deleteFile(fileId);
        await displayFiles();
        showMessage(`âœ… ØªÙ… Ø­Ø°Ù ${file.name}`, 'success');
      } catch (error) {
        showMessage('âŒ ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù', 'error');
      }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
    async function refreshFiles() {
      await displayFiles();
      showMessage('ğŸ”„ ØªÙ… ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª', 'info');
    }
    
    // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
    async function clearAllFiles() {
      if (!confirm('ğŸ—‘ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§ØªØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!')) {
        return;
      }
      
      try {
        await clearAllFilesFromDB();
        await displayFiles();
        showMessage('âœ… ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª', 'success');
      } catch (error) {
        showMessage('âŒ ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù„ÙØ§Øª', 'error');
      }
    }
    
    // ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
    async function exportFiles() {
      try {
        const files = await getAllFiles();
        
        if (files.length === 0) {
          showMessage('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
          return;
        }
        
        const exportData = {
          exportDate: new Date().toLocaleString('ar-SA'),
          filesCount: files.length,
          files: files
        };
        
        const dataStr = JSON.stringify(exportData, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        
        const a = document.createElement('a');
        a.href = URL.createObjectURL(dataBlob);
        a.download = `files_backup_${Date.now()}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        showMessage(`ğŸ“¦ ØªÙ… ØªØµØ¯ÙŠØ± ${files.length} Ù…Ù„Ù`, 'success');
      } catch (error) {
        showMessage('âŒ ÙØ´Ù„ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„ÙØ§Øª', 'error');
      }
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§Øª
    function setupDragAndDrop() {
      const uploadArea = document.getElementById('upload-area');
      
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
      });
      
      uploadArea.addEventListener('dragleave', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        
        const files = e.dataTransfer.files;
        document.getElementById('file-input').files = files;
      });
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        await initDB();
        setupDragAndDrop();
        await displayFiles();
        showMessage('âœ… Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù„ÙØ§Øª Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…', 'success');
      } catch (error) {
        showMessage('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚', 'error');
        console.error('App initialization error:', error);
      }
    });
  </script>
</body>
</html>